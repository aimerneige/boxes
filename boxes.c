/* Only Win Permitted */
#include <stdio.h>
#include <stdlib.h>
#include <conio.h>

// #define WIDTH 8
// #define HEIGHT 8

void initData(void); // 初始化数据
void drawMap(void); // 绘制画面
void moveUp(void); // 向上移动
void moveDown(void); // 向下移动
void moveLeft(void); // 向左移动
void moveRight(void); // 向右移动
void move(char direction); // 移动

int map[8][8] = {
        {0, 0, 1, 1, 1, 0, 0, 0},
        {0, 0, 1, 4, 1, 0, 0, 0},
        {0, 0, 1, 0, 1, 1, 1, 1},
        {1, 1, 1, 3, 0, 3, 4, 1},
        {1, 4, 0, 3, 2, 1, 1, 1},
        {1, 1, 1, 1, 3, 1, 0, 0},
        {0, 0, 0, 1, 4, 1, 0, 0},
        {0, 0, 0, 1, 1, 1, 0, 0}
}; // 可通过三维数组实现多关卡
/**
 * 0 表示空
 * 1 表示墙
 * 2 表示人
 * 3 表示箱子
 * 4 表示目的地
 * 5 表示已完成的箱子
 */

int x = 0;
int y = 0;

int boxes = 0;

// int course = 1; // 可通过三维数组实现多关卡

// int error = 0;

int main()
{
    char direction;
    initData();
    printf("Press \"w a s d\" to move.\n");
    // printf("Press \"w a s d\" to move and press r to restart.\n");
    drawMap();
    direction = getch();
    while ( boxes ) {
        move(direction);
        system("cls");
        drawMap();
        direction = getch();
    }
    printf("You win!\n");

    return 0;
}


void initData(void)
{
    for (int i = 0; i < 8; i++) {
        for (int j = 0; j < 8; j++) {
            if ( map[i][j] == 2 ) {
                x = i;
                y = j;
            } else if ( map [i][j] == 3) {
                boxes++;
            }
        }
    }
}

void drawMap(void)
{
    for (int i = 0; i < 8; i++) {
        for (int j = 0; j < 8; j++) {
            int temp = map[i][j];
            switch (temp) {
                case 0:
                    printf("  ");
                    break;
                case 1:
                    printf("■");
                    break;
                case 2:
                    printf("♀");
                    break;
                case 3:
                    printf("◆");
                    break;
                case 4:
                    printf("●");
                    break;
                case 5:
                    printf("★");
                    break;
                    // default:
                    // printf("Error Happens!\n");
                    // error = 1;
                    // return;
            }
        }
        printf("\n");
    }
} // Tested

/** 移动时的可能
 * 前面是墙
 * 前面是空白
 * 前面是箱子 -- 箱子前面是 '墙' '空白' '箱子' '目的地' '完成的箱子'
 * 前面是目的地
 * 前面是完成的箱子
 */

void moveUp(void)
{

}

void moveDown(void)
{

}

void moveLeft(void)
{

}

void moveRight(void)
{

}

void move(char direction)
{
    switch (direction) {
        case 'w':
            moveUp();
            break;
        case 'a':
            moveLeft();
            break;
        case 's':
            moveDown();
            break;
        case 'd':
            moveRight();
            break;
        default:
            direction = getch();
            move(direction);
    }
}